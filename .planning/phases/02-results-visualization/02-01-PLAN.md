---
phase: 02-results-visualization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [components/ProjectionTable.tsx, lib/calculations/projections.ts, app/page.tsx]
autonomous: true

must_haves:
  truths:
    - "User can see 12-month projection with monthly breakdown"
    - "User can identify 3-month and 6-month cumulative savings"
    - "Table displays both Traditional and Tikin scenarios"
  artifacts:
    - path: "components/ProjectionTable.tsx"
      provides: "12-month projection table with highlights"
      min_lines: 50
    - path: "lib/calculations/projections.ts"
      provides: "Multi-period calculation logic"
      exports: ["calculateMonthlyProjections"]
  key_links:
    - from: "ProjectionTable.tsx"
      to: "projections.ts"
      via: "imports calculateMonthlyProjections"
      pattern: "import.*calculateMonthlyProjections"
    - from: "app/page.tsx"
      to: "ProjectionTable.tsx"
      via: "renders with savingsData"
      pattern: "<ProjectionTable"
---

<objective>
Implement 12-month projection table with cumulative savings highlights.

Purpose: Enable sales teams to show multi-period savings impact (3, 6, 12 months) for client presentations and decision-making.
Output: Interactive table component displaying monthly breakdown with visual highlights for key milestones.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md

Existing calculation engine:
@lib/calculations/scenarios.ts
@types/scenarios.ts

Current page structure:
@app/page.tsx
@components/SavingsMetrics.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create multi-period projection calculations</name>
  <files>lib/calculations/projections.ts</files>
  <action>
    Create calculateMonthlyProjections function that:
    - Takes SavingsResult as input (from existing scenarios.ts)
    - Generates array of 12 monthly projections
    - Each month includes: monthNumber, traditionalCost, tikinCost, monthlySavings, cumulativeSavings
    - Calculates cumulative totals progressively (month 1 = monthlySavings, month 2 = month1 + month2, etc.)
    - Returns typed MonthlyProjection[] array

    Export TypeScript interface:
    ```
    interface MonthlyProjection {
      month: number
      traditionalCost: number
      tikinCost: number
      monthlySavings: number
      cumulativeSavings: number
    }
    ```

    Use same calculation logic from scenarios.ts but replicate for 12 periods.
  </action>
  <verify>
    - TypeScript compiles without errors
    - Function returns array of exactly 12 projections
    - Cumulative savings increases monotonically
    - Month 12 cumulative equals 12 × monthly savings
  </verify>
  <done>calculateMonthlyProjections function exported and working</done>
</task>

<task type="auto">
  <name>Task 2: Build projection table component</name>
  <files>components/ProjectionTable.tsx, app/page.tsx</files>
  <action>
    Create ProjectionTable component:
    - Accept savingsData prop (SavingsResult)
    - Call calculateMonthlyProjections(savingsData)
    - Render responsive table with columns: Mes, Escenario Tradicional, Escenario Tikin, Ahorro Mensual, Ahorro Acumulado
    - Use Tailwind classes for styling
    - Highlight rows for months 3, 6, 12 with distinct background color (bg-green-50 for month 3, bg-green-100 for month 6, bg-green-200 for month 12)
    - Format all currency values with formatCOP from lib/formatters
    - Add section header: "Proyección a 12 Meses"
    - Make table horizontally scrollable on mobile

    Add to app/page.tsx after SavingsMetrics component.
  </action>
  <verify>
    - npm run build succeeds
    - Table displays 12 rows correctly
    - Months 3, 6, 12 have visual highlights
    - All numbers format as Colombian pesos
    - Responsive on mobile (horizontal scroll works)
  </verify>
  <done>Projection table renders with all 12 months and highlights visible</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] Table shows all 12 months
- [ ] Cumulative savings increase correctly
- [ ] Visual highlights visible on months 3, 6, 12
- [ ] All values format as currency
</verification>

<success_criteria>
- All tasks completed
- VIZ-06, VIZ-07, VIZ-08 requirements satisfied
- Table integrates into existing page flow
- No errors or warnings introduced
</success_criteria>

<output>
After completion, create `.planning/phases/02-results-visualization/02-01-SUMMARY.md`
</output>
